resources:
  - ../ns-system
  - app-namespace.yaml
  - components/controller-cluster-role-binding.yaml
  - components/sablier-cluster-role-binding.yaml

patches:
  - path: components/builder-deployment-patch.yaml
  - path: components/certificate-patch.yaml
  - path: components/controller-cluster-role-global-binding-patch.yaml
  - path: components/controller-cluster-role-local-binding-patch.yaml
  - path: components/controller-cluster-role-global-patch.yaml
  - path: components/controller-cluster-role-local-patch.yaml
  - path: components/controller-ssh-service-patch.yaml
  - path: components/controller-deployment-patch.yaml
  - path: components/dashboard-deployment-patch.yaml
  - path: components/gateway-deployment-patch.yaml
  - path: components/gitea-integration-stateful-set-patch.yaml
  - path: components/gitea-integration-service.yaml
  - path: components/ingress-route-patch.yaml
  - path: components/migrate-job-patch.yaml
  - path: components/sablier-cluster-role-binding-patch.yaml
  - path: components/sablier-cluster-role-patch.yaml
  - path: components/sablier-deployment-patch.yaml
  - path: components/ssgen-stateful-set-patch.yaml
  - path: db/adminer-certificate-patch.yaml
  - path: db/adminer-deployment-patch.yaml
  - path: db/adminer-ingress-route-patch.yaml
  - path: db/mariadb-stateful-set-patch.yaml
  - path: db/mongo-stateful-set-patch.yaml
  - path: app-namespace-patch.yaml
  - path: backup/mariadb-backup-cron-workflow-patch.yaml
  - path: backup/mariadb-backup-workflow-template-patch.yaml
  - path: backup/mongodb-backup-cron-workflow-patch.yaml
  - path: backup/mongodb-backup-workflow-template-patch.yaml

configMapGenerator:
  - name: ns-config
    files:
      - config/ns.yaml
    behavior: replace

generators:
  - ksops.yaml

images:
  - name: ns-builder-dev
    newName: ghcr.io/traptitech/ns-builder
    newTag: main@sha256:dcce8899e0779a7189549ea88d92d64f9e367ec1d905d9330dacaa5a519e1efe
  - name: ns-controller-dev
    newName: ghcr.io/traptitech/ns-controller
    newTag: main@sha256:67eb8908f4e44a36c580e5d73a18bb9dd6786bdeef045c215ab1cfabbde78f01
  - name: ns-dashboard-dev
    newName: ghcr.io/traptitech/ns-dashboard
    newTag: main@sha256:f2bcd091bc5a52483ce8d97eab881974af9598d39ea3c3bc30538d62ff7f7701
  - name: ns-gateway-dev
    newName: ghcr.io/traptitech/ns-gateway
    newTag: main@sha256:e37233ff0ca8688c32496dbb5a22298d88b35433d44ff819c6e3bc7e922bf023
  - name: ns-gitea-integration-dev
    newName: ghcr.io/traptitech/ns-gitea-integration
    newTag: main@sha256:5991db136cc6bf189f788b6f6c739173e22a510433b3ccad87a37b3a3abca8df
  - name: ns-migrate-dev
    newName: ghcr.io/traptitech/ns-migrate
    newTag: main@sha256:262d279545f9decff9c313302390ee8c744a20358ed77add7da7f4e8d74d6555
  - name: ns-ssgen-dev
    newName: ghcr.io/traptitech/ns-ssgen
    newTag: main@sha256:90a249671855b251e1edeef08390329e8ad3a8de507ddda3e10e25038f252fff
  - name: ns-sablier-dev
    newName: ghcr.io/traptitech/ns-sablier
    newTag: main@sha256:be973dc61b075ed7615705915c9cde20a7c1722bafcc9d92aaf6bf5c343da153
